1:SELECT `testtoto`.* FROM `testtoto` INNER JOIN `customers` ON `customers`.`id` = `testtoto`.`customer_id` WHERE `testtoto`.`user_id` = 1194 AND `testtoto`.`deleted_at` IS NULL AND `testtoto`.`status` != 3 AND `customers`.`not_deleted` = TRUE AND `testtoto`.`id` IN (SELECT `testtoto`.`id` FROM `testtoto` WHERE `testtoto`.`user_id` = 1194 AND `testtoto`.`deleted_at` IS NULL AND testtoto.id IN (SELECT `testtoto`.`id` FROM `testtoto` INNER JOIN ( SELECT `testtoto`.`customer_id`, min(`testtoto`.`start_at`) AS `min_start_at` FROM `testtoto` WHERE `testtoto`.`deleted_at` IS NULL AND `testtoto`.`user_id` = 1194 AND `testtoto`.`start_at` >= '2022-09-26 22:19:22' AND `testtoto`.`status` != 3 GROUP BY `testtoto`.`customer_id` HAVING MIN(`testtoto`.`start_at`) > '2022-10-24 06:59:59.999999' ) AS `min_testtoto` ON `testtoto`.`customer_id` = `min_testtoto`.`customer_id` AND `testtoto`.`start_at` = `min_testtoto`.`min_start_at`)) AND `testtoto`.`id` IN (SELECT `testtoto`.`id` FROM `testtoto` WHERE `testtoto`.`user_id` = 1194 AND `testtoto`.`deleted_at` IS NULL AND testtoto.id IN (SELECT `testtoto`.`id` FROM `testtoto` INNER JOIN ( SELECT `testtoto`.`customer_id`, min(`testtoto`.`start_at`) AS `min_start_at` FROM `testtoto` WHERE `testtoto`.`deleted_at` IS NULL AND `testtoto`.`user_id` = 1194 AND `testtoto`.`start_at` >= '2022-09-26 22:19:22' AND `testtoto`.`status` != 3 GROUP BY `testtoto`.`customer_id` HAVING MIN(`testtoto`.`start_at`) < '2022-10-30 07:00:00' ) AS `min_testtoto` ON `testtoto`.`customer_id` = `min_testtoto`.`customer_id` AND `testtoto`.`start_at` = `min_testtoto`.`min_start_at`)) AND `testtoto`.`id` IN (SELECT `testtoto`.`id` FROM `testtoto` WHERE `testtoto`.`user_id` = 1194 AND `testtoto`.`deleted_at` IS NULL AND `testtoto`.`id` IN (SELECT `meta`.`metadatable_id` FROM `meta` WHERE `meta`.`user_id` = 1194 AND `meta`.`name` = 'op_code_array' AND `meta`.`metadatable_type` = 'Appointment' AND `meta`.`serialized_value` LIKE '%\"JLR06F\"%')):9.473780:1664230762
1:SELECT `messages`.* FROM `messages` INNER JOIN `customers` ON `customers`.`id` = `messages`.`customer_id` WHERE `messages`.`user_id` = 3706 AND `customers`.`not_deleted` = TRUE AND `messages`.`id` IN (SELECT `messages`.`id` FROM `messages` WHERE `messages`.`user_id` = 3706 AND `messages`.`direction` = 1 AND messages.id IN (SELECT `messages`.`id` FROM `messages` INNER JOIN ( SELECT `messages`.`customer_id`, max(`messages`.`created_at`) AS `max_created_at` FROM `messages` INNER JOIN `customers` ON `customers`.`id` = `messages`.`customer_id` AND `customers`.`user_id` = 3706 AND `customers`.`not_deleted` = TRUE WHERE `messages`.`user_id` = 3706 AND `messages`.`direction` = 1 GROUP BY `messages`.`customer_id` HAVING MAX(`messages`.`created_at`) BETWEEN '2022-09-05 04:00:00' AND '2022-09-28 03:59:59.999999' ) AS `max_messages` ON `messages`.`customer_id` = `max_messages`.`customer_id` AND `messages`.`created_at` = `max_messages`.`max_created_at` WHERE `messages`.`user_id` = 3706)):988.922000:1664216185
1:SELECT `events`.* FROM `events` INNER JOIN `customers` ON `customers`.`id` = `events`.`customer_id` WHERE `events`.`user_id` = 3684 AND `events`.`not_deleted` = TRUE AND `customers`.`not_deleted` = TRUE AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 3684 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`happened_at` BETWEEN '2022-03-15 04:00:00' AND '2022-06-16 03:59:59') AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 3684 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`id` IN (SELECT `meta`.`metadatable_id` FROM `meta` WHERE `meta`.`user_id` = 3684 AND `meta`.`name` = 'op_code_array' AND `meta`.`metadatable_type` = 'Event' AND `meta`.`serialized_value` LIKE '%\\\"19%')):9.398730:1664215753
1:SELECT `messages`.* FROM `messages` INNER JOIN `customers` ON `customers`.`id` = `messages`.`customer_id` WHERE `messages`.`user_id` = 3706 AND `customers`.`not_deleted` = TRUE AND `messages`.`id` IN (SELECT `messages`.`id` FROM `messages` WHERE `messages`.`user_id` = 3706 AND `messages`.`direction` = 1 AND messages.id IN (SELECT `messages`.`id` FROM `messages` INNER JOIN ( SELECT `messages`.`customer_id`, max(`messages`.`created_at`) AS `max_created_at` FROM `messages` INNER JOIN `customers` ON `customers`.`id` = `messages`.`customer_id` AND `customers`.`user_id` = 3706 AND `customers`.`not_deleted` = TRUE WHERE `messages`.`user_id` = 3706 AND `messages`.`direction` = 1 GROUP BY `messages`.`customer_id` HAVING MAX(`messages`.`created_at`) BETWEEN '2022-09-12 04:00:00' AND '2022-09-28 03:59:59.999999' ) AS `max_messages` ON `messages`.`customer_id` = `max_messages`.`customer_id` AND `messages`.`created_at` = `max_messages`.`max_created_at` WHERE `messages`.`user_id` = 3706)):524.780000:1664215075
1:SELECT `events`.* FROM `events` INNER JOIN `customers` ON `customers`.`id` = `events`.`customer_id` WHERE `events`.`user_id` = 3684 AND `events`.`not_deleted` = TRUE AND `customers`.`not_deleted` = TRUE AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 3684 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`happened_at` BETWEEN '2022-01-03 05:00:00' AND '2022-09-01 03:59:59') AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 3684 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`id` IN (SELECT `meta`.`metadatable_id` FROM `meta` WHERE `meta`.`user_id` = 3684 AND `meta`.`name` = 'op_code_array' AND `meta`.`metadatable_type` = 'Event' AND `meta`.`serialized_value` LIKE '%\"19suzztag-ent\"%')):34.978400:1664212843
1:SELECT `events`.* FROM `events` INNER JOIN `customers` ON `customers`.`id` = `events`.`customer_id` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `customers`.`not_deleted` = TRUE AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND events.id IN (SELECT `events`.`id` FROM `events` INNER JOIN ( SELECT `events`.`customer_id`, max(`events`.`happened_at`) AS `max_happened_at` FROM `events` WHERE `events`.`not_deleted` = TRUE AND `events`.`user_id` = 2775 AND `events`.`name` = 'repair-order-closed' AND `events`.`happened_at` <= '2022-09-26 15:48:57' GROUP BY `events`.`customer_id` HAVING MAX(`events`.`happened_at`) > '2021-09-27 03:59:59.999999' AND MAX(`events`.`happened_at`) <= '2022-09-26 15:48:57.161545' ) AS `max_events` ON `events`.`customer_id` = `max_events`.`customer_id` AND `events`.`happened_at` = `max_events`.`max_happened_at`)) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND events.id IN (SELECT `events`.`id` FROM `events` INNER JOIN ( SELECT `events`.`customer_id`, max(`events`.`happened_at`) AS `max_happened_at` FROM `events` WHERE `events`.`not_deleted` = TRUE AND `events`.`user_id` = 2775 AND `events`.`name` = 'repair-order-closed' AND `events`.`happened_at` <= '2022-09-26 15:48:57' GROUP BY `events`.`customer_id` HAVING MAX(`events`.`happened_at`) < '2022-08-27 04:00:00' ) AS `max_events` ON `events`.`customer_id` = `max_events`.`customer_id` AND `events`.`happened_at` = `max_events`.`max_happened_at`)) AND `events`.`customer_id` NOT IN (SELECT `testtoto`.`customer_id` FROM `testtoto` WHERE `testtoto`.`user_id` = 2775 AND `testtoto`.`deleted_at` IS NULL AND `testtoto`.`start_at` >= '2022-09-26 15:48:57') AND `events`.`customer_id` IN (SELECT `customers`.`id` FROM `customers` WHERE `customers`.`user_id` = 2775 AND `customers`.`not_deleted` = TRUE AND REPLACE(`customers`.`cell_phone_number`, '+', '') IS NOT NULL) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`id` IN (SELECT `meta`.`metadatable_id` FROM `meta` WHERE `meta`.`user_id` = 2775 AND `meta`.`name` = 'job_code_array' AND `meta`.`metadatable_type` = 'Event' AND `meta`.`serialized_value` LIKE '%\"%PN18%\"%')) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`id` IN (SELECT `events`.`id` FROM `events` LEFT OUTER JOIN `meta` ON `meta`.`metadatable_id` = `events`.`id` AND `meta`.`user_id` = 2775 AND `meta`.`name` = 'job_description_array' AND `meta`.`metadatable_type` = 'Event' WHERE `events`.`user_id` = 2775 AND (`meta`.`serialized_value` NOT LIKE '%\"%ENTREPOSAGE%\"%' OR `meta`.`id` IS NULL))):21.155200:1664207337
1:SELECT `events`.* FROM `events` INNER JOIN `customers` ON `customers`.`id` = `events`.`customer_id` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `customers`.`not_deleted` = TRUE AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND events.id IN (SELECT `events`.`id` FROM `events` INNER JOIN ( SELECT `events`.`customer_id`, max(`events`.`happened_at`) AS `max_happened_at` FROM `events` WHERE `events`.`not_deleted` = TRUE AND `events`.`user_id` = 2775 AND `events`.`name` = 'repair-order-closed' AND `events`.`happened_at` <= '2022-09-26 15:47:49' GROUP BY `events`.`customer_id` HAVING MAX(`events`.`happened_at`) > '2021-09-27 03:59:59.999999' AND MAX(`events`.`happened_at`) <= '2022-09-26 15:47:49.321723' ) AS `max_events` ON `events`.`customer_id` = `max_events`.`customer_id` AND `events`.`happened_at` = `max_events`.`max_happened_at`)) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND events.id IN (SELECT `events`.`id` FROM `events` INNER JOIN ( SELECT `events`.`customer_id`, max(`events`.`happened_at`) AS `max_happened_at` FROM `events` WHERE `events`.`not_deleted` = TRUE AND `events`.`user_id` = 2775 AND `events`.`name` = 'repair-order-closed' AND `events`.`happened_at` <= '2022-09-26 15:47:49' GROUP BY `events`.`customer_id` HAVING MAX(`events`.`happened_at`) < '2022-08-27 04:00:00' ) AS `max_events` ON `events`.`customer_id` = `max_events`.`customer_id` AND `events`.`happened_at` = `max_events`.`max_happened_at`)) AND `events`.`customer_id` NOT IN (SELECT `testtoto`.`customer_id` FROM `testtoto` WHERE `testtoto`.`user_id` = 2775 AND `testtoto`.`deleted_at` IS NULL AND `testtoto`.`start_at` >= '2022-09-26 15:47:49') AND `events`.`customer_id` IN (SELECT `customers`.`id` FROM `customers` WHERE `customers`.`user_id` = 2775 AND `customers`.`not_deleted` = TRUE AND REPLACE(`customers`.`cell_phone_number`, '+', '') IS NOT NULL) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`id` IN (SELECT `meta`.`metadatable_id` FROM `meta` WHERE `meta`.`user_id` = 2775 AND `meta`.`name` = 'job_code_array' AND `meta`.`metadatable_type` = 'Event' AND `meta`.`serialized_value` LIKE '%\"%PN17%\"%')) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`id` IN (SELECT `events`.`id` FROM `events` LEFT OUTER JOIN `meta` ON `meta`.`metadatable_id` = `events`.`id` AND `meta`.`user_id` = 2775 AND `meta`.`name` = 'job_description_array' AND `meta`.`metadatable_type` = 'Event' WHERE `events`.`user_id` = 2775 AND (`meta`.`serialized_value` NOT LIKE '%\"%ENTREPOSAGE%\"%' OR `meta`.`id` IS NULL))) AND `events`.`customer_id` IN (SELECT `testtoto`.`customer_id` FROM `testtoto` WHERE `testtoto`.`user_id` = 2775 AND `testtoto`.`deleted_at` IS NULL AND (`testtoto`.`start_at` < '2022-09-03 04:00:00' OR `testtoto`.`start_at` > '2022-09-04 03:59:59')):7.807790:1664207269
1:SELECT `events`.* FROM `events` INNER JOIN `customers` ON `customers`.`id` = `events`.`customer_id` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `customers`.`not_deleted` = TRUE AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND events.id IN (SELECT `events`.`id` FROM `events` INNER JOIN ( SELECT `events`.`customer_id`, max(`events`.`happened_at`) AS `max_happened_at` FROM `events` WHERE `events`.`not_deleted` = TRUE AND `events`.`user_id` = 2775 AND `events`.`name` = 'repair-order-closed' AND `events`.`happened_at` <= '2022-09-26 15:47:49' GROUP BY `events`.`customer_id` HAVING MAX(`events`.`happened_at`) > '2021-09-27 03:59:59.999999' AND MAX(`events`.`happened_at`) <= '2022-09-26 15:47:49.322950' ) AS `max_events` ON `events`.`customer_id` = `max_events`.`customer_id` AND `events`.`happened_at` = `max_events`.`max_happened_at`)) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND events.id IN (SELECT `events`.`id` FROM `events` INNER JOIN ( SELECT `events`.`customer_id`, max(`events`.`happened_at`) AS `max_happened_at` FROM `events` WHERE `events`.`not_deleted` = TRUE AND `events`.`user_id` = 2775 AND `events`.`name` = 'repair-order-closed' AND `events`.`happened_at` <= '2022-09-26 15:47:49' GROUP BY `events`.`customer_id` HAVING MAX(`events`.`happened_at`) < '2022-08-27 04:00:00' ) AS `max_events` ON `events`.`customer_id` = `max_events`.`customer_id` AND `events`.`happened_at` = `max_events`.`max_happened_at`)) AND `events`.`customer_id` NOT IN (SELECT `testtoto`.`customer_id` FROM `testtoto` WHERE `testtoto`.`user_id` = 2775 AND `testtoto`.`deleted_at` IS NULL AND `testtoto`.`start_at` >= '2022-09-26 15:47:49') AND `events`.`customer_id` IN (SELECT `customers`.`id` FROM `customers` WHERE `customers`.`user_id` = 2775 AND `customers`.`not_deleted` = TRUE AND REPLACE(`customers`.`cell_phone_number`, '+', '') IS NOT NULL) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`id` IN (SELECT `meta`.`metadatable_id` FROM `meta` WHERE `meta`.`user_id` = 2775 AND `meta`.`name` = 'job_code_array' AND `meta`.`metadatable_type` = 'Event' AND `meta`.`serialized_value` LIKE '%\"%PN16%\"%')) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`id` IN (SELECT `events`.`id` FROM `events` LEFT OUTER JOIN `meta` ON `meta`.`metadatable_id` = `events`.`id` AND `meta`.`user_id` = 2775 AND `meta`.`name` = 'job_description_array' AND `meta`.`metadatable_type` = 'Event' WHERE `events`.`user_id` = 2775 AND (`meta`.`serialized_value` NOT LIKE '%\"%ENTREPOSAGE%\"%' OR `meta`.`id` IS NULL))) AND `events`.`customer_id` IN (SELECT `testtoto`.`customer_id` FROM `testtoto` WHERE `testtoto`.`user_id` = 2775 AND `testtoto`.`deleted_at` IS NULL AND (`testtoto`.`start_at` < '2022-09-03 04:00:00' OR `testtoto`.`start_at` > '2022-09-04 03:59:59')):8.260680:1664207269
1:SELECT `events`.* FROM `events` INNER JOIN `customers` ON `customers`.`id` = `events`.`customer_id` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `customers`.`not_deleted` = TRUE AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND events.id IN (SELECT `events`.`id` FROM `events` INNER JOIN ( SELECT `events`.`customer_id`, max(`events`.`happened_at`) AS `max_happened_at` FROM `events` WHERE `events`.`not_deleted` = TRUE AND `events`.`user_id` = 2775 AND `events`.`name` = 'repair-order-closed' AND `events`.`happened_at` <= '2022-09-26 15:30:46' GROUP BY `events`.`customer_id` HAVING MAX(`events`.`happened_at`) > '2021-09-27 03:59:59.999999' AND MAX(`events`.`happened_at`) <= '2022-09-26 15:30:46.065834' ) AS `max_events` ON `events`.`customer_id` = `max_events`.`customer_id` AND `events`.`happened_at` = `max_events`.`max_happened_at`)) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND events.id IN (SELECT `events`.`id` FROM `events` INNER JOIN ( SELECT `events`.`customer_id`, max(`events`.`happened_at`) AS `max_happened_at` FROM `events` WHERE `events`.`not_deleted` = TRUE AND `events`.`user_id` = 2775 AND `events`.`name` = 'repair-order-closed' AND `events`.`happened_at` <= '2022-09-26 15:30:46' GROUP BY `events`.`customer_id` HAVING MAX(`events`.`happened_at`) < '2022-08-27 04:00:00' ) AS `max_events` ON `events`.`customer_id` = `max_events`.`customer_id` AND `events`.`happened_at` = `max_events`.`max_happened_at`)) AND `events`.`customer_id` NOT IN (SELECT `testtoto`.`customer_id` FROM `testtoto` WHERE `testtoto`.`user_id` = 2775 AND `testtoto`.`deleted_at` IS NULL AND `testtoto`.`start_at` >= '2022-09-26 15:30:46') AND `events`.`customer_id` IN (SELECT `customers`.`id` FROM `customers` WHERE `customers`.`user_id` = 2775 AND `customers`.`not_deleted` = TRUE AND REPLACE(`customers`.`cell_phone_number`, '+', '') IS NOT NULL) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`id` IN (SELECT `meta`.`metadatable_id` FROM `meta` WHERE `meta`.`user_id` = 2775 AND `meta`.`name` = 'job_code_array' AND `meta`.`metadatable_type` = 'Event' AND `meta`.`serialized_value` LIKE '%\"%PN16%\"%')) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`id` IN (SELECT `events`.`id` FROM `events` LEFT OUTER JOIN `meta` ON `meta`.`metadatable_id` = `events`.`id` AND `meta`.`user_id` = 2775 AND `meta`.`name` = 'job_description_array' AND `meta`.`metadatable_type` = 'Event' WHERE `events`.`user_id` = 2775 AND (`meta`.`serialized_value` NOT LIKE '%\"%ENTREPOSAGE%\"%' OR `meta`.`id` IS NULL))) AND `events`.`customer_id` IN (SELECT `testtoto`.`customer_id` FROM `testtoto` WHERE `testtoto`.`user_id` = 2775 AND `testtoto`.`deleted_at` IS NULL AND (`testtoto`.`start_at` < '2022-09-03 04:00:00' OR `testtoto`.`start_at` > '2022-09-04 03:59:59')):8.387400:1664206246
1:SELECT `events`.* FROM `events` INNER JOIN `customers` ON `customers`.`id` = `events`.`customer_id` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `customers`.`not_deleted` = TRUE AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND events.id IN (SELECT `events`.`id` FROM `events` INNER JOIN ( SELECT `events`.`customer_id`, max(`events`.`happened_at`) AS `max_happened_at` FROM `events` WHERE `events`.`not_deleted` = TRUE AND `events`.`user_id` = 2775 AND `events`.`name` = 'repair-order-closed' AND `events`.`happened_at` <= '2022-09-26 15:29:56' GROUP BY `events`.`customer_id` HAVING MAX(`events`.`happened_at`) > '2021-09-27 03:59:59.999999' AND MAX(`events`.`happened_at`) <= '2022-09-26 15:29:56.710912' ) AS `max_events` ON `events`.`customer_id` = `max_events`.`customer_id` AND `events`.`happened_at` = `max_events`.`max_happened_at`)) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND events.id IN (SELECT `events`.`id` FROM `events` INNER JOIN ( SELECT `events`.`customer_id`, max(`events`.`happened_at`) AS `max_happened_at` FROM `events` WHERE `events`.`not_deleted` = TRUE AND `events`.`user_id` = 2775 AND `events`.`name` = 'repair-order-closed' AND `events`.`happened_at` <= '2022-09-26 15:29:56' GROUP BY `events`.`customer_id` HAVING MAX(`events`.`happened_at`) < '2022-08-27 04:00:00' ) AS `max_events` ON `events`.`customer_id` = `max_events`.`customer_id` AND `events`.`happened_at` = `max_events`.`max_happened_at`)) AND `events`.`customer_id` NOT IN (SELECT `testtoto`.`customer_id` FROM `testtoto` WHERE `testtoto`.`user_id` = 2775 AND `testtoto`.`deleted_at` IS NULL AND `testtoto`.`start_at` >= '2022-09-26 15:29:56') AND `events`.`customer_id` IN (SELECT `customers`.`id` FROM `customers` WHERE `customers`.`user_id` = 2775 AND `customers`.`not_deleted` = TRUE AND REPLACE(`customers`.`cell_phone_number`, '+', '') IS NOT NULL) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`id` IN (SELECT `meta`.`metadatable_id` FROM `meta` WHERE `meta`.`user_id` = 2775 AND `meta`.`name` = 'job_code_array' AND `meta`.`metadatable_type` = 'Event' AND `meta`.`serialized_value` LIKE '%\"%PN16%\"%')) AND `events`.`id` IN (SELECT `events`.`id` FROM `events` WHERE `events`.`user_id` = 2775 AND `events`.`not_deleted` = TRUE AND `events`.`name` = 'repair-order-closed' AND `events`.`id` IN (SELECT `meta`.`metadatable_id` FROM `meta` WHERE `meta`.`user_id` = 2775 AND `meta`.`name` = 'job_description_array' AND `meta`.`metadatable_type` = 'Event' AND `meta`.`serialized_value` LIKE '%\"%ENTREPOSAGE%\"%')) AND `events`.`customer_id` IN (SELECT `testtoto`.`customer_id` FROM `testtoto` WHERE `testtoto`.`user_id` = 2775 AND `testtoto`.`deleted_at` IS NULL AND (`testtoto`.`start_at` < '2022-09-03 04:00:00' OR `testtoto`.`start_at` > '2022-09-04 03:59:59')):7.338250:1664206196